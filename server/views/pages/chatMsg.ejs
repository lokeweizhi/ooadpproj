<!doctype html>
<html>
<head>
    <script src="/javascripts/socket.io.js"></script>    
    <% include ../partials/javascript %>
    <% include ../partials/stylesheet %>
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, maxium-scale=1.0"> -->
    <link rel="stylesheet" href="/public/stylesheets/chat.css">

</head>    
<body>
    <style>
        textarea{
            resize: none
        }
        #Seller{
            text-align: center;
            padding-top: 1rem;
        }
        #chicken{
            padding-bottom: 5px;
            padding-top:5px;
        }
        #messages
        {       
            /* background-color: lightblue; */
            border: 2px solid black;
            border-radius: 5px;
            height: 240px;
            width: 100%;
            padding: 10px;    
            overflow-y: auto;
        }
        .myborder {
            border-top: 1px solid black;
            border-bottom: 1px solid black;
            width: 100%;
        }
        #prod_img {
            margin-top: 5px;
            margin-bottom: 5px;
            height: 100px;
            width: 100px;
        }
    </style>
<% include ../partials/header %>
<div class="container">  
        <p id ="Seller">Name of Seller</p>
        <div class="row" id="chicken">
            <div class="myborder">
                <div class="col-sm-3" style="text-align: center;">
                    <!--update image here-->
                    <img  id="prod_img" src ="data:image/jpeg;base64,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"/>
                </div>
                <div class="col-sm-5">
                    <br>
                    <!-- Update product name here -->
                    <p>Product Name</p>
                    <br>
                    <!-- Update price here -->
                    <p>Product Price</p>
                </div>
                <div class="col-sm-4">
                    <br>
                    <br>
                    <form action="/makeOffer" method="POST">
                        <div class="input-group" style="width: 60%">
                            <span class="input-group-text">S$</span>
                            <input type="number" class="form-control" step="0.10" name="offerprice">
                            <span class="input-group-btn">
                                <button type="submit" id="MakeOffer" class="btn btn-success">Make Offer</button>
                            </span>
                        </div>
                    </form>
                </div>
            </div>
            <br>
            <div class="container">
                <br>
                <input id="name" class="form-control" placeholder="Name" value="<%=user%>" readonly style="display: none"> 
                <div id="messages" type="textarea">
                    <%data.forEach(function(msg){%>
                        <p><strong><%=msg.name%> : </strong><%=msg.message%></p>
                        <p dir="rtl"></p> 
                    <%})%>
                </div>
                <br>
                <textarea id="message" class="form-control"  placeholder="Type your message here"></textarea>
                <br>
                <button type="submit" id="send" class="btn btn-success">Send</button>
                <button id="upload" class="btn btn-success">Upload Image</button>
            </div>    
        </div>
</div>


<script>
    var socket = io()
    $(() => {
        $("#send").click(()=>{
            var message = { name: $("#name").val(), message: $("#message").val()}
            postMessage(message)
        })
        
    })

    socket.on('message', addMessage)



    function addMessage(msg){
        $("#messages").append(`<h4> ${msg.name} </h4> <p> ${msg.message} </p>`);
        //window.location.reload();
    }

    function postMessage(message) {
        $.post('<%-url%>', message)
    }
    
    

    
    

</script>    
</body>
<% include ../partials/footer %>
</html>